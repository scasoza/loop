{% extends "base.html" %}
{% block content %}
<div class="card">
  <h2>Log observation</h2>
  <form method="post">
    <label for="goal_id">Related goal</label>
    <select id="goal_id" name="goal_id">
      <option value="">Not linked</option>
      {% for goal in goal_options %}
        <option value="{{ goal.id }}">{{ goal.title }}</option>
      {% endfor %}
    </select>

    <label for="mood">Mood (0-10)</label>
    <input id="mood" name="mood" type="number" min="0" max="10" step="0.1" />

    <label for="energy">Energy (0-10)</label>
    <input id="energy" name="energy" type="number" min="0" max="10" step="0.1" />

    <label for="sleep_hours">Sleep hours</label>
    <input id="sleep_hours" name="sleep_hours" type="number" step="0.1" />

    <label for="social">Social interactions</label>
    <input id="social" name="social" />

    <label for="note">Quick note</label>
    <textarea id="note" name="note" placeholder="Energy dip after lunch, long walk..." ></textarea>

    <button type="submit">Save observation</button>
  </form>
</div>

<div class="card">
  <h3>Recent observations</h3>
  {% if observations %}
  <table>
    <thead>
      <tr><th>Time (UTC)</th><th>Goal</th><th>Mood</th><th>Energy</th><th>Sleep</th><th>Social</th><th>Note</th></tr>
    </thead>
    <tbody>
      {% for obs in observations|reverse %}
      <tr>
        <td>{{ obs.timestamp }}</td>
        <td>{{ obs.goal_id or 'â€”' }}</td>
        <td>{{ obs.mood }}</td>
        <td>{{ obs.energy }}</td>
        <td>{{ obs.sleep_hours }}</td>
        <td>{{ obs.social }}</td>
        <td>{{ obs.note }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p>No observations yet.</p>
  {% endif %}
</div>
{% endblock %}
